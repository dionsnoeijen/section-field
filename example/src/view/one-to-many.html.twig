{% extends "master.html.twig" %}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            <a href="/relationships"><- Relationships</a>
            <hr />
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h2>One to many</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <h4>One - Has relationship to Many</h4>
            <p>This relationship is defined in the section config with a field. ("oneToMany")</p>
            <hr />
            <ul>
                {% for entry in section('otmOne').limit(10).fetch() %}
                    <li>{{ entry.default }} <a href="/relationships/update-one-record-otm/{{ entry.slug }}" class="btn btn-default pull-right">Edit</a></li>
                    <ul>
                        {% for many in entry.otmManies %}
                            <li>{{ many.default }}</li>
                        {% endfor %}
                    </ul>
                    <hr />
                {% endfor %}
            </ul>
            <a class="btn btn-default" href="/relationships/create-one-record-otm">Create "One" entry</a>
        </div>
        <div class="col-md-6">
            <h4>Many - Has relationship to One</h4>
            <p>This relationship is automatically added, because the opposing side has the relationship.</p>
            <hr />
            <ul>
                {% for entry in section('otmMany').limit(10).fetch() %}
                    <li>{{ entry.default }} <a href="/relationships/update-many-record-otm/{{ entry.slug }}" class="btn btn-default pull-right">Edit</a></li>
                    {% if entry.otmOne is not empty %}
                    <ul>
                        <li>{{ entry.otmOne.default }}</li>
                    </ul>
                    {% endif %}
                    <hr />
                {% endfor %}
            </ul>
            <a class="btn btn-default" href="/relationships/create-many-record-otm">Create "Many" entry</a>
        </div>
    </div>
{% endblock %}
